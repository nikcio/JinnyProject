{% extends 'base.html'%}
{% load static %}

{% block head %}
    <link rel="stylesheet" href="{% static 'user_management/css/dashboard.css' %}{{version}}">
    <link rel="stylesheet" href="{% static 'jinny_cooking/css/frontpage.css' %}{{version}}">
{% endblock %}

{% block content %}

{% if perms.cooking %}
<section class="middle dashboard">
    <section class="wrapper-actions">
        <a href="{% url 'logout' %}" class="viewall --sm">
           Logout
        </a>
        {% if perms.cooking.add_recipe %}
        <a href="/accounts/add/recipe/" class="viewall --sm --dark">
            Add recipe
        </a>
        {% endif %}
    </section>
    <section class="wrapper-content">
        <div class="wrapper-submissions">
            <div class="title">
                Your submissions
            </div>
            <div class="row">
                {% for recipe in allRecipes %}
                    {% if recipe.author == user %}
                        <div class="item">
                            <div class="wrapper-image">
                                <img src="{{recipe.image.url}}">
                                {% if perms.cooking.change_recipe %}
                                <a href="{% url 'update-recipe' recipe.pk%}" class="viewall --sm --dark">Change</a>
                                {% else %}
                                <a href="recipe.get_absolute_url" class="viewall --sm --dark">View</a>
                                {% endif %}
                            </div>
                            <div class="wrapper-status">
                                {% if recipe.published %}
                                <span class="status">Published</span>
                                <span class="iconify dot" data-inline="false" data-icon="entypo:dot-single"></span>
                                {% else %}
                                <span class="status">Not Published</span>
                                <span class="iconify dot" data-inline="false" data-icon="entypo:dot-single" style="color:Red"></span>
                                {% endif %}
                            </div>
                            <span class="item-title">{{recipe.title}}</span>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="separator">

        </div>
        <div class="wrapper-submissions">
            <div class="title">
                All submissions
            </div>
            <div class="row">
                {% for recipe in allRecipes %}
                    {% if recipe.author != user %}
                        <div class="item">
                            <div class="wrapper-image">
                                <img src="{{recipe.image.url}}">
                                {% if perms.cooking.change_recipe %}
                                <a href="{% url 'update-recipe' recipe.pk%}" class="viewall --sm --dark">Change</a>
                                {% else %}
                                <a href="recipe.get_absolute_url" class="viewall --sm --dark">View</a>
                                {% endif %}
                            </div>
                            <div class="wrapper-status">
                                {% if recipe.published %}
                                <span class="status">Published</span>
                                <span class="iconify dot" data-inline="false" data-icon="entypo:dot-single"></span>
                                {% else %}
                                <span class="status">Not Published</span>
                                <span class="iconify dot" data-inline="false" data-icon="entypo:dot-single" style="color:Red"></span>
                                {% endif %}
                            </div>
                            <span class="item-title">{{recipe.title}}</span>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>
</section>
{% endif %}
{% endblock %}
